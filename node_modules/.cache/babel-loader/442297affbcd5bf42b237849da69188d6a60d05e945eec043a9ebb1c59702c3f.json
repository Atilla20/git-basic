{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nexport const useSearch = query => {\n  _s();\n  const [state, setState] = useState({\n    articles: [],\n    status: 'IDLE',\n    error: ''\n  });\n  const cancelToken = useRef(null);\n  useEffect(() => {\n    if (query.length < 3) {\n      return;\n    }\n    if (cancelToken.current) {\n      console.log('cancel ---1');\n      cancelToken.current.cancel();\n    }\n    cancelToken.current = axios.CancelToken.source();\n    axios.get(`https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=${query}`, {\n      cancelToken: cancelToken.current.token\n    }).then(function (response) {\n      const parsedResponse = [];\n      for (let i = 0; i < response.data[1].length; i++) {\n        parsedResponse.push({\n          id: response.data[3][i],\n          label: response.data[1][i]\n        });\n      }\n      ;\n      setState({\n        articles: parsedResponse,\n        status: 'SUCCESS',\n        error: ''\n      });\n    }).catch(function (error) {\n      if (axios.isCancel(error)) {\n        console.log('Catch cancelled');\n        return;\n      }\n      setState({\n        articles: [],\n        status: 'ERROR',\n        error: error\n      });\n    });\n  }, [query]);\n  return state;\n};\n_s(useSearch, \"RrJgy6+v4bmQfRQDj/Vsy5cx1ms=\");\nexport const useDebounce = (value, delay = 500) => {\n  _s2();\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n};\n_s2(useDebounce, \"KDuPAtDOgxm8PU6legVJOb3oOmA=\");","map":{"version":3,"names":["useEffect","useState","useRef","axios","useSearch","query","state","setState","articles","status","error","cancelToken","length","current","console","log","cancel","CancelToken","source","get","token","then","response","parsedResponse","i","data","push","id","label","catch","isCancel","useDebounce","value","delay","debouncedValue","setDebouncedValue","timer","setTimeout","clearTimeout"],"sources":["/Users/annatillack/Desktop/git-basic/src/hooks.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\n\nexport const useSearch = (query) => {\n\n    const [state, setState] = useState({\n        articles: [],\n        status: 'IDLE',\n        error: ''\n    });\n\n    const cancelToken = useRef( null);\n\n    useEffect(() => {\n        if (query.length < 3) {\n            return;\n        }\n\n        if(cancelToken.current) {\n            console.log('cancel ---1');\n            cancelToken.current.cancel();\n        }\n\n        cancelToken.current = axios.CancelToken.source();\n\n        axios.get(`https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=${query}`, {\n            cancelToken: cancelToken.current.token\n        })\n        .then(function (response) {\n         const parsedResponse = [];\n    \n         for (let i =0; i < response.data[1].length; i++) {\n          parsedResponse.push({\n            id: response.data[3][i],\n            label: response.data[1][i]\n          })\n         };\n         setState({\n            articles: parsedResponse,\n            status: 'SUCCESS',\n            error: ''\n         })\n        })\n        .catch(function (error) {\n            if(axios.isCancel(error)){\n                console.log('Catch cancelled');\n                return;\n            }\n          setState({\n            articles: [],\n            status: 'ERROR',\n            error: error\n          });\n\n        })\n      }, [query]);\n      \n      return state;\n\n};\n\nexport const useDebounce = (value, delay = 500 ) => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect( () => {\n        const timer = setTimeout( () => {\n            setDebouncedValue(value)\n        }, delay);\n\n        return () => {\n            clearTimeout(timer)\n        }\n    }, [value, delay]);\n\n    return debouncedValue;\n\n}"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AACnD,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,SAAS,GAAIC,KAAK,IAAK;EAAA;EAEhC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC;IAC/BO,QAAQ,EAAE,EAAE;IACZC,MAAM,EAAE,MAAM;IACdC,KAAK,EAAE;EACX,CAAC,CAAC;EAEF,MAAMC,WAAW,GAAGT,MAAM,CAAE,IAAI,CAAC;EAEjCF,SAAS,CAAC,MAAM;IACZ,IAAIK,KAAK,CAACO,MAAM,GAAG,CAAC,EAAE;MAClB;IACJ;IAEA,IAAGD,WAAW,CAACE,OAAO,EAAE;MACpBC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;MAC1BJ,WAAW,CAACE,OAAO,CAACG,MAAM,EAAE;IAChC;IAEAL,WAAW,CAACE,OAAO,GAAGV,KAAK,CAACc,WAAW,CAACC,MAAM,EAAE;IAEhDf,KAAK,CAACgB,GAAG,CAAE,wEAAuEd,KAAM,EAAC,EAAE;MACvFM,WAAW,EAAEA,WAAW,CAACE,OAAO,CAACO;IACrC,CAAC,CAAC,CACDC,IAAI,CAAC,UAAUC,QAAQ,EAAE;MACzB,MAAMC,cAAc,GAAG,EAAE;MAEzB,KAAK,IAAIC,CAAC,GAAE,CAAC,EAAEA,CAAC,GAAGF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC,CAACb,MAAM,EAAEY,CAAC,EAAE,EAAE;QAChDD,cAAc,CAACG,IAAI,CAAC;UAClBC,EAAE,EAAEL,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC,CAACD,CAAC,CAAC;UACvBI,KAAK,EAAEN,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC,CAACD,CAAC;QAC3B,CAAC,CAAC;MACH;MAAC;MACDjB,QAAQ,CAAC;QACNC,QAAQ,EAAEe,cAAc;QACxBd,MAAM,EAAE,SAAS;QACjBC,KAAK,EAAE;MACV,CAAC,CAAC;IACH,CAAC,CAAC,CACDmB,KAAK,CAAC,UAAUnB,KAAK,EAAE;MACpB,IAAGP,KAAK,CAAC2B,QAAQ,CAACpB,KAAK,CAAC,EAAC;QACrBI,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;QAC9B;MACJ;MACFR,QAAQ,CAAC;QACPC,QAAQ,EAAE,EAAE;QACZC,MAAM,EAAE,OAAO;QACfC,KAAK,EAAEA;MACT,CAAC,CAAC;IAEJ,CAAC,CAAC;EACJ,CAAC,EAAE,CAACL,KAAK,CAAC,CAAC;EAEX,OAAOC,KAAK;AAElB,CAAC;AAAC,GAxDWF,SAAS;AA0DtB,OAAO,MAAM2B,WAAW,GAAG,CAACC,KAAK,EAAEC,KAAK,GAAG,GAAG,KAAM;EAAA;EAChD,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGlC,QAAQ,CAAC+B,KAAK,CAAC;EAE3DhC,SAAS,CAAE,MAAM;IACb,MAAMoC,KAAK,GAAGC,UAAU,CAAE,MAAM;MAC5BF,iBAAiB,CAACH,KAAK,CAAC;IAC5B,CAAC,EAAEC,KAAK,CAAC;IAET,OAAO,MAAM;MACTK,YAAY,CAACF,KAAK,CAAC;IACvB,CAAC;EACL,CAAC,EAAE,CAACJ,KAAK,EAAEC,KAAK,CAAC,CAAC;EAElB,OAAOC,cAAc;AAEzB,CAAC;AAAA,IAfYH,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}